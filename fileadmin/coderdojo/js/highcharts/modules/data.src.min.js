!function(a){"object"==typeof module&&module.exports?module.exports=a:a(Highcharts)}(function(a){var b,c=a.win,d=c.document,e=a.each,f=a.pick,g=a.inArray,h=a.isNumber,i=a.splat,j=function(a,b){this.init(a,b)};a.extend(j.prototype,{init:function(a,b){this.options=a,this.chartOptions=b,this.columns=a.columns||this.rowsToColumns(a.rows)||[],this.firstRowAsNames=f(a.firstRowAsNames,!0),this.decimalRegex=a.decimalPoint&&new RegExp("^(-?[0-9]+)"+a.decimalPoint+"([0-9]+)$"),this.rawColumns=[],this.columns.length?this.dataFound():(this.parseCSV(),this.parseTable(),this.parseGoogleSpreadsheet())},getColumnDistribution:function(){var c,d=this.chartOptions,f=this.options,g=[],h=function(b){return(a.seriesTypes[b||"line"].prototype.pointArrayMap||[0]).length},i=function(b){return a.seriesTypes[b||"line"].prototype.pointArrayMap},j=d&&d.chart&&d.chart.type,k=[],l=[],m=0;e(d&&d.series||[],function(a){k.push(h(a.type||j))}),e(f&&f.seriesMapping||[],function(a){g.push(a.x||0)}),0===g.length&&g.push(0),e(f&&f.seriesMapping||[],function(a){var e,f=new b,g=k[m]||h(j),n=d&&d.series||[],o=n[m]||{},p=i(o.type||j)||["y"];f.addColumnReader(a.x,"x");for(e in a)a.hasOwnProperty(e)&&"x"!==e&&f.addColumnReader(a[e],e);for(c=0;c<g;c++)f.hasReader(p[c])||f.addColumnReader(void 0,p[c]);l.push(f),m++});var n=i(j);void 0===n&&(n=["y"]),this.valueCount={global:h(j),xColumns:g,individual:k,seriesBuilders:l,globalPointArrayMap:n}},dataFound:function(){this.options.switchRowsAndColumns&&(this.columns=this.rowsToColumns(this.columns)),this.getColumnDistribution(),this.parseTypes(),this.parsed()!==!1&&this.complete()},parseCSV:function(){var a,b,c=this,d=this.options,f=d.csv,g=this.columns,h=d.startRow||0,i=d.endRow||Number.MAX_VALUE,j=d.startColumn||0,k=d.endColumn||Number.MAX_VALUE,l=0;f&&(b=f.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split(d.lineDelimiter||"\n"),a=d.itemDelimiter||(f.indexOf("\t")!==-1?"\t":","),e(b,function(b,d){var f,m=c.trim(b),n=0===m.indexOf("#"),o=""===m;d>=h&&d<=i&&!n&&!o&&(f=b.split(a),e(f,function(a,b){b>=j&&b<=k&&(g[b-j]||(g[b-j]=[]),g[b-j][l]=a)}),l+=1)}),this.dataFound())},parseTable:function(){var a=this.options,b=a.table,c=this.columns,f=a.startRow||0,g=a.endRow||Number.MAX_VALUE,h=a.startColumn||0,i=a.endColumn||Number.MAX_VALUE;b&&("string"==typeof b&&(b=d.getElementById(b)),e(b.getElementsByTagName("tr"),function(a,b){b>=f&&b<=g&&e(a.children,function(a,d){("TD"===a.tagName||"TH"===a.tagName)&&d>=h&&d<=i&&(c[d-h]||(c[d-h]=[]),c[d-h][b-f]=a.innerHTML)})}),this.dataFound())},parseGoogleSpreadsheet:function(){var a,b,c=this,d=this.options,e=d.googleSpreadsheetKey,f=this.columns,g=d.startRow||0,h=d.endRow||Number.MAX_VALUE,i=d.startColumn||0,j=d.endColumn||Number.MAX_VALUE;e&&jQuery.ajax({dataType:"json",url:"https://spreadsheets.google.com/feeds/cells/"+e+"/"+(d.googleSpreadsheetWorksheet||"od6")+"/public/values?alt=json-in-script&callback=?",error:d.error,success:function(d){var e,k,l=d.feed.entry,m=l.length,n=0,o=0;for(k=0;k<m;k++)e=l[k],n=Math.max(n,e.gs$cell.col),o=Math.max(o,e.gs$cell.row);for(k=0;k<n;k++)k>=i&&k<=j&&(f[k-i]=[],f[k-i].length=Math.min(o,h-g));for(k=0;k<m;k++)e=l[k],a=e.gs$cell.row-1,b=e.gs$cell.col-1,b>=i&&b<=j&&a>=g&&a<=h&&(f[b-i][a-g]=e.content.$t);c.dataFound()}})},trim:function(a,b){return"string"==typeof a&&(a=a.replace(/^\s+|\s+$/g,""),b&&/^[0-9\s]+$/.test(a)&&(a=a.replace(/\s/g,"")),this.decimalRegex&&(a=a.replace(this.decimalRegex,"$1.$2"))),a},parseTypes:function(){for(var a=this.columns,b=a.length;b--;)this.parseColumn(a[b],b)},parseColumn:function(a,b){var c,d,e,f,j,k,l,m=this.rawColumns,n=this.columns,o=a.length,p=this.firstRowAsNames,q=g(b,this.valueCount.xColumns)!==-1,r=[],s=this.chartOptions,t=this.options.columnTypes||[],u=t[b],v=q&&(s&&s.xAxis&&"category"===i(s.xAxis)[0].type||"string"===u);for(m[b]||(m[b]=[]);o--;)c=r[o]||a[o],e=this.trim(c),f=this.trim(c,!0),d=parseFloat(f),void 0===m[b][o]&&(m[b][o]=e),v||0===o&&p?a[o]=e:+f===d?(a[o]=d,d>31536e6&&"float"!==u?a.isDatetime=!0:a.isNumeric=!0,void 0!==a[o+1]&&(l=d>a[o+1])):(j=this.parseDate(c),q&&h(j)&&"float"!==u?(r[o]=c,a[o]=j,a.isDatetime=!0,void 0!==a[o+1]&&(k=j>a[o+1],k!==l&&void 0!==l&&(this.alternativeFormat?(this.dateFormat=this.alternativeFormat,o=a.length,this.alternativeFormat=this.dateFormats[this.dateFormat].alternative):a.unsorted=!0),l=k)):(a[o]=""===e?null:e,0!==o&&(a.isDatetime||a.isNumeric)&&(a.mixed=!0)));if(q&&a.mixed&&(n[b]=m[b]),q&&l&&this.options.sort)for(b=0;b<n.length;b++)n[b].reverse(),p&&n[b].unshift(n[b].pop())},dateFormats:{"YYYY-mm-dd":{regex:/^([0-9]{4})[\-\/\.]([0-9]{2})[\-\/\.]([0-9]{2})$/,parser:function(a){return Date.UTC(+a[1],a[2]-1,+a[3])}},"dd/mm/YYYY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{4})$/,parser:function(a){return Date.UTC(+a[3],a[2]-1,+a[1])},alternative:"mm/dd/YYYY"},"mm/dd/YYYY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{4})$/,parser:function(a){return Date.UTC(+a[3],a[1]-1,+a[2])}},"dd/mm/YY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{2})$/,parser:function(a){return Date.UTC(+a[3]+2e3,a[2]-1,+a[1])},alternative:"mm/dd/YY"},"mm/dd/YY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{2})$/,parser:function(a){return Date.UTC(+a[3]+2e3,a[1]-1,+a[2])}}},parseDate:function(a){var b,c,d,e,f=this.options.parseDate,g=this.options.dateFormat||this.dateFormat;if(f)b=f(a);else if("string"==typeof a){if(g)d=this.dateFormats[g],e=a.match(d.regex),e&&(b=d.parser(e));else for(c in this.dateFormats)if(d=this.dateFormats[c],e=a.match(d.regex)){this.dateFormat=g=c,this.alternativeFormat=d.alternative,b=d.parser(e);break}e||(e=Date.parse(a),"object"==typeof e&&null!==e&&e.getTime?b=e.getTime()-6e4*e.getTimezoneOffset():h(e)&&(b=e-6e4*new Date(e).getTimezoneOffset()))}return b},rowsToColumns:function(a){var b,c,d,e,f;if(a)for(f=[],c=a.length,b=0;b<c;b++)for(e=a[b].length,d=0;d<e;d++)f[d]||(f[d]=[]),f[d][b]=a[b][d];return f},parsed:function(){if(this.options.parsed)return this.options.parsed.call(this,this.columns)},getFreeIndexes:function(a,b){var c,d,e,f=[],g=[];for(d=0;d<a;d+=1)f.push(!0);for(c=0;c<b.length;c+=1)for(e=b[c].getReferencedColumnIndexes(),d=0;d<e.length;d+=1)f[e[d]]=!1;for(d=0;d<f.length;d+=1)f[d]&&g.push(d);return g},complete:function(){var a,c,d,e,f,h,i,j,k,l,m,n,o=this.columns,p=[],q=this.options,r=[];if(p.length=o.length,q.complete||q.afterComplete){for(e=0;e<o.length;e++)this.firstRowAsNames&&(o[e].name=o[e].shift());for(c=[],l=this.getFreeIndexes(o.length,this.valueCount.seriesBuilders),i=0;i<this.valueCount.seriesBuilders.length;i++)k=this.valueCount.seriesBuilders[i],k.populateColumns(l)&&r.push(k);for(;l.length>0;){for(k=new b,k.addColumnReader(0,"x"),n=g(0,l),n!==-1&&l.splice(n,1),e=0;e<this.valueCount.global;e++)k.addColumnReader(void 0,this.valueCount.globalPointArrayMap[e]);k.populateColumns(l)&&r.push(k)}if(r.length>0&&r[0].readers.length>0&&(m=o[r[0].readers[0].columnIndex],void 0!==m&&(m.isDatetime?a="datetime":m.isNumeric||(a="category"))),"category"===a)for(i=0;i<r.length;i++)for(k=r[i],h=0;h<k.readers.length;h++)"x"===k.readers[h].configName&&(k.readers[h].configName="name");for(i=0;i<r.length;i++){for(k=r[i],d=[],f=0;f<o[0].length;f++)d[f]=k.read(o,f);c[i]={data:d},k.name&&(c[i].name=k.name),"category"===a&&(c[i].turboThreshold=0)}j={series:c},a&&(j.xAxis={type:a}),q.complete&&q.complete(j),q.afterComplete&&q.afterComplete(j)}}}),a.Data=j,a.data=function(a,b){return new j(a,b)},a.wrap(a.Chart.prototype,"init",function(b,c,d){var e=this;c&&c.data?a.data(a.extend(c.data,{afterComplete:function(f){var g,h;if(c.hasOwnProperty("series"))if("object"==typeof c.series)for(g=Math.max(c.series.length,f.series.length);g--;)h=c.series[g]||{},c.series[g]=a.merge(h,f.series[g]);else delete c.series;c=a.merge(f,c),b.call(e,c,d)}}),c):b.call(e,c,d)}),b=function(){this.readers=[],this.pointIsArray=!0},b.prototype.populateColumns=function(a){var b=this,c=!0;return e(b.readers,function(b){void 0===b.columnIndex&&(b.columnIndex=a.shift())}),e(b.readers,function(a){void 0===a.columnIndex&&(c=!1)}),c},b.prototype.read=function(a,b){var c,d=this,f=d.pointIsArray,g=f?[]:{};return e(d.readers,function(c){var d=a[c.columnIndex][b];f?g.push(d):g[c.configName]=d}),void 0===this.name&&d.readers.length>=2&&(c=d.getReferencedColumnIndexes(),c.length>=2&&(c.shift(),c.sort(),this.name=a[c.shift()].name)),g},b.prototype.addColumnReader=function(a,b){this.readers.push({columnIndex:a,configName:b}),"x"!==b&&"y"!==b&&void 0!==b&&(this.pointIsArray=!1)},b.prototype.getReferencedColumnIndexes=function(){var a,b,c=[];for(a=0;a<this.readers.length;a+=1)b=this.readers[a],void 0!==b.columnIndex&&c.push(b.columnIndex);return c},b.prototype.hasReader=function(a){var b,c;for(b=0;b<this.readers.length;b+=1)if(c=this.readers[b],c.configName===a)return!0}});
//# sourceMappingURL=data.src.min.js.map