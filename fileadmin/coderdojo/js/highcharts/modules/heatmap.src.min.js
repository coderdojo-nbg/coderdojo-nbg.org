!function(a){"object"==typeof module&&module.exports?module.exports=a:a(Highcharts)}(function(a){var b,c=a.Axis,d=a.Chart,e=a.Color,f=a.Legend,g=a.LegendSymbolMixin,h=a.Series,i=a.Point,j=a.getOptions(),k=a.each,l=a.extend,m=a.extendClass,n=a.isNumber,o=a.merge,p=a.pick,q=a.seriesTypes,r=a.wrap,s=function(){},t=a.ColorAxis=function(){this.isColorAxis=!0,this.init.apply(this,arguments)};l(t.prototype,c.prototype),l(t.prototype,{defaultColorAxisOptions:{lineWidth:0,minPadding:0,maxPadding:0,gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},color:"gray",width:.01},labels:{overflow:"justify"},minColor:"#EFEFFF",maxColor:"#003875",tickLength:5},init:function(a,b){var d,e="vertical"!==a.options.legend.layout;d=o(this.defaultColorAxisOptions,{side:e?2:1,reversed:!e},b,{opposite:!e,showEmpty:!1,title:null,isColor:!0}),c.prototype.init.call(this,a,d),b.dataClasses&&this.initDataClasses(b),this.initStops(b),this.horiz=e,this.zoomEnabled=!1},tweenColors:function(a,b,c){var d,e;return b.rgba.length&&a.rgba.length?(a=a.rgba,b=b.rgba,d=1!==b[3]||1!==a[3],e=(d?"rgba(":"rgb(")+Math.round(b[0]+(a[0]-b[0])*(1-c))+","+Math.round(b[1]+(a[1]-b[1])*(1-c))+","+Math.round(b[2]+(a[2]-b[2])*(1-c))+(d?","+(b[3]+(a[3]-b[3])*(1-c)):"")+")"):e=b.input||"none",e},initDataClasses:function(a){var b,c=this,d=this.chart,f=0,g=this.options,h=a.dataClasses.length;this.dataClasses=b=[],this.legendItems=[],k(a.dataClasses,function(a,i){var j;a=o(a),b.push(a),a.color||("category"===g.dataClassColor?(j=d.options.colors,a.color=j[f++],f===j.length&&(f=0)):a.color=c.tweenColors(e(g.minColor),e(g.maxColor),h<2?.5:i/(h-1)))})},initStops:function(a){this.stops=a.stops||[[0,this.options.minColor],[1,this.options.maxColor]],k(this.stops,function(a){a.color=e(a[1])})},setOptions:function(a){c.prototype.setOptions.call(this,a),this.options.crosshair=this.options.marker,this.coll="colorAxis"},setAxisSize:function(){var a,b,c,d,e=this.legendSymbol,f=this.chart;e&&(this.left=a=e.attr("x"),this.top=b=e.attr("y"),this.width=c=e.attr("width"),this.height=d=e.attr("height"),this.right=f.chartWidth-a-c,this.bottom=f.chartHeight-b-d,this.len=this.horiz?c:d,this.pos=this.horiz?a:b)},toColor:function(a,c){var d,e,f,g,h,i,j=this.stops,k=this.dataClasses;if(k){for(i=k.length;i--;)if(h=k[i],e=h.from,f=h.to,(e===b||a>=e)&&(f===b||a<=f)){g=h.color,c&&(c.dataClass=i);break}}else{for(this.isLog&&(a=this.val2lin(a)),d=1-(this.max-a)/(this.max-this.min||1),i=j.length;i--&&!(d>j[i][0]););e=j[i]||j[i+1],f=j[i+1]||e,d=1-(f[0]-d)/(f[0]-e[0]||1),g=this.tweenColors(e.color,f.color,d)}return g},getOffset:function(){var a=this.legendGroup,b=this.chart.axisOffset[this.side];a&&(this.axisParent=a,c.prototype.getOffset.call(this),this.added||(this.added=!0,this.labelLeft=0,this.labelRight=this.width),this.chart.axisOffset[this.side]=b)},setLegendColor:function(){var a,b=this.horiz,c=this.options,d=this.reversed,e=d?1:0,f=d?0:1;a=b?[e,0,f,0]:[0,f,0,e],this.legendColor={linearGradient:{x1:a[0],y1:a[1],x2:a[2],y2:a[3]},stops:c.stops||[[0,c.minColor],[1,c.maxColor]]}},drawLegendSymbol:function(a,b){var c=a.padding,d=a.options,e=this.horiz,f=p(d.symbolWidth,e?200:12),g=p(d.symbolHeight,e?12:200),h=p(d.labelPadding,e?16:30),i=p(d.itemDistance,10);this.setLegendColor(),b.legendSymbol=this.chart.renderer.rect(0,a.baseline-11,f,g).attr({zIndex:1}).add(b.legendGroup),this.legendItemWidth=f+c+(e?i:h),this.legendItemHeight=g+c+(e?h:0)},setState:s,visible:!0,setVisible:s,getSeriesExtremes:function(){var a;this.series.length&&(a=this.series[0],this.dataMin=a.valueMin,this.dataMax=a.valueMax)},drawCrosshair:function(a,b){var d,e=b&&b.plotX,f=b&&b.plotY,g=this.pos,h=this.len;b&&(d=this.toPixels(b[b.series.colorKey]),d<g?d=g-2:d>g+h&&(d=g+h+2),b.plotX=d,b.plotY=this.len-d,c.prototype.drawCrosshair.call(this,a,b),b.plotX=e,b.plotY=f,this.cross&&this.cross.attr({fill:this.crosshair.color}).add(this.legendGroup))},getPlotLinePath:function(a,b,d,e,f){return n(f)?this.horiz?["M",f-4,this.top-6,"L",f+4,this.top-6,f,this.top,"Z"]:["M",this.left,f,"L",this.left-6,f+6,this.left-6,f-6,"Z"]:c.prototype.getPlotLinePath.call(this,a,b,d,e)},update:function(a,b){var d=this.chart,e=d.legend;k(this.series,function(a){a.isDirtyData=!0}),a.dataClasses&&e.allItems&&(k(e.allItems,function(a){a.isDataClass&&a.legendGroup.destroy()}),d.isDirtyLegend=!0),d.options[this.coll]=o(this.userOptions,a),c.prototype.update.call(this,a,b),this.legendItem&&(this.setLegendColor(),e.colorizeItem(this,!0))},getDataClassLegendSymbols:function(){var c,d=this,e=this.chart,f=this.legendItems,h=e.options.legend,i=h.valueDecimals,j=h.valueSuffix||"";return f.length||k(this.dataClasses,function(h,m){var n=!0,o=h.from,p=h.to;c="",o===b?c="< ":p===b&&(c="> "),o!==b&&(c+=a.numberFormat(o,i)+j),o!==b&&p!==b&&(c+=" - "),p!==b&&(c+=a.numberFormat(p,i)+j),f.push(l({chart:e,name:c,options:{},drawLegendSymbol:g.drawRectangle,visible:!0,setState:s,isDataClass:!0,setVisible:function(){n=this.visible=!n,k(d.series,function(a){k(a.points,function(a){a.dataClass===m&&a.setVisible(n)})}),e.legend.colorizeItem(this,n)}},h))}),f},name:""}),k(["fill","stroke"],function(b){a.Fx.prototype[b+"Setter"]=function(){this.elem.attr(b,t.prototype.tweenColors(e(this.start),e(this.end),this.pos))}}),r(d.prototype,"getAxes",function(a){var b=this.options,c=b.colorAxis;a.call(this),this.colorAxis=[],c&&new t(this,c)}),r(f.prototype,"getAllItems",function(a){var b=[],c=this.chart.colorAxis[0];return c&&(c.options.dataClasses?b=b.concat(c.getDataClassLegendSymbols()):b.push(c),k(c.series,function(a){a.options.showInLegend=!1})),b.concat(a.call(this))});var u={setVisible:function(a){var b=this,c=a?"show":"hide";k(["graphic","dataLabel"],function(a){b[a]&&b[a][c]()})}},v={pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",dashstyle:"dashStyle"},pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],optionalAxis:"colorAxis",trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:s,parallelArrays:["x","y","value"],colorKey:"value",translateColors:function(){var a=this,b=this.options.nullColor,c=this.colorAxis,d=this.colorKey;k(this.data,function(e){var f,g=e[d];f=e.options.color||(null===g?b:c&&void 0!==g?c.toColor(g,e):e.color||a.color),f&&(e.color=f)})}};j.plotOptions.heatmap=o(j.plotOptions.scatter,{animation:!1,borderWidth:0,nullColor:"#F8F8F8",dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},marker:null,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{normal:{animation:!0},hover:{halo:!1,brightness:.2}}}),q.heatmap=m(q.scatter,o(v,{type:"heatmap",pointArrayMap:["y","value"],hasPointSpecificOptions:!0,pointClass:m(i,u),supportsDrilldown:!0,getExtremesFromAll:!0,directTouch:!0,init:function(){var a;q.scatter.prototype.init.apply(this,arguments),a=this.options,a.pointRange=p(a.pointRange,a.colsize||1),this.yAxis.axisPointRange=a.rowsize||1},translate:function(){var a=this,b=a.options,c=a.xAxis,d=a.yAxis,e=function(a,b,c){return Math.min(Math.max(b,a),c)};a.generatePoints(),k(a.points,function(a){var f=(b.colsize||1)/2,g=(b.rowsize||1)/2,h=e(Math.round(c.len-c.translate(a.x-f,0,1,0,1)),-c.len,2*c.len),i=e(Math.round(c.len-c.translate(a.x+f,0,1,0,1)),-c.len,2*c.len),j=e(Math.round(d.translate(a.y-g,0,1,0,1)),-d.len,2*d.len),k=e(Math.round(d.translate(a.y+g,0,1,0,1)),-d.len,2*d.len);a.plotX=a.clientX=(h+i)/2,a.plotY=(j+k)/2,a.shapeType="rect",a.shapeArgs={x:Math.min(h,i),y:Math.min(j,k),width:Math.abs(i-h),height:Math.abs(k-j)}}),a.translateColors(),this.chart.hasRendered&&k(a.points,function(a){a.shapeArgs.fill=a.options.color||a.color})},drawPoints:q.column.prototype.drawPoints,animate:s,getBox:s,drawLegendSymbol:g.drawRectangle,alignDataLabel:q.column.prototype.alignDataLabel,getExtremes:function(){h.prototype.getExtremes.call(this,this.valueData),this.valueMin=this.dataMin,this.valueMax=this.dataMax,h.prototype.getExtremes.call(this)}}))});
//# sourceMappingURL=heatmap.src.min.js.map