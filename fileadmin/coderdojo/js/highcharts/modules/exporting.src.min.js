!function(a){"object"==typeof module&&module.exports?module.exports=a:a(Highcharts)}(function(a){var b,c,d=a.win,e=d.document,f=a.Chart,g=a.addEvent,h=a.removeEvent,i=a.fireEvent,j=a.createElement,k=a.discardElement,l=a.css,m=a.merge,n=a.each,o=a.extend,p=a.splat,q=Math,r=q.max,s=a.isTouchDevice,t="M",u="L",v="div",w="hidden",x="none",y="highcharts-",z="absolute",A="px",B=a.Renderer.prototype.symbols,C=a.getOptions();o(C.lang,{printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"}),C.navigation={menuStyle:{border:"1px solid #A0A0A0",background:"#FFFFFF",padding:"5px 0"},menuItemStyle:{padding:"0 10px",background:x,color:"#303030",fontSize:s?"14px":"11px"},menuItemHoverStyle:{background:"#4572A5",color:"#FFFFFF"},buttonOptions:{symbolFill:"#E0E0E0",symbolSize:14,symbolStroke:"#666",symbolStrokeWidth:3,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,theme:{fill:"white",stroke:"none"},verticalAlign:"top",width:24}},C.exporting={type:"image/png",url:"http://export.highcharts.com/",printMaxWidth:780,buttons:{contextButton:{menuClassName:y+"contextmenu",symbol:"menu",_titleKey:"contextButtonTitle",menuItems:[{textKey:"printChart",onclick:function(){this.print()}},{separator:!0},{textKey:"downloadPNG",onclick:function(){this.exportChart()}},{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}]}}},a.post=function(a,b,c){var d,f;f=j("form",m({method:"post",action:a,enctype:"multipart/form-data"},c),{display:x},e.body);for(d in b)j("input",{type:w,name:d,value:b[d]},null,f);f.submit(),k(f)},o(f.prototype,{sanitizeSVG:function(a){return a.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ (NS[0-9]+\:)?href=/g," xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/(fill|stroke)="rgba\(([ 0-9]+,[ 0-9]+,[ 0-9]+),([ 0-9\.]+)\)"/g,'$1="rgb($2)" $1-opacity="$3"').replace(/&nbsp;/g," ").replace(/&shy;/g,"­").replace(/<IMG /g,"<image ").replace(/<(\/?)TITLE>/g,"<$1title>").replace(/height=([^" ]+)/g,'height="$1"').replace(/width=([^" ]+)/g,'width="$1"').replace(/hc-svg-href="([^"]+)">/g,'xlink:href="$1"/>').replace(/ id=([^" >]+)/g,' id="$1"').replace(/class=([^" >]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(a){return a.toLowerCase()})},getChartHTML:function(){return this.container.innerHTML},getSVG:function(c){var d,f,g,h,i,l,q,r,s,t=this,u=m(t.options,c),w=u.exporting.allowHTML;return e.createElementNS||(e.createElementNS=function(a,b){return e.createElement(b)}),f=j(v,null,{position:z,top:"-9999em",width:t.chartWidth+A,height:t.chartHeight+A},e.body),q=t.renderTo.style.width,r=t.renderTo.style.height,i=u.exporting.sourceWidth||u.chart.width||/px$/.test(q)&&parseInt(q,10)||600,l=u.exporting.sourceHeight||u.chart.height||/px$/.test(r)&&parseInt(r,10)||400,o(u.chart,{animation:!1,renderTo:f,forExport:!0,renderer:"SVGRenderer",width:i,height:l}),u.exporting.enabled=!1,delete u.data,u.series=[],n(t.series,function(a){h=m(a.userOptions,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:a.visible}),h.isInternal||u.series.push(h)}),c&&n(["xAxis","yAxis"],function(a){n(p(c[a]),function(b,c){u[a][c]=m(u[a][c],b)})}),d=new a.Chart(u,t.callback),n(["xAxis","yAxis"],function(a){n(t[a],function(c,e){var f=d[a][e],g=c.getExtremes(),h=g.userMin,i=g.userMax;!f||h===b&&i===b||f.setExtremes(h,i,!0,!1)})}),g=d.getChartHTML(),u=null,d.destroy(),k(f),w&&(s=g.match(/<\/svg>(.*?$)/),s&&(s='<foreignObject x="0" y="0" width="200" height="200"><body xmlns="http://www.w3.org/1999/xhtml">'+s[1]+"</body></foreignObject>",g=g.replace("</svg>",s+"</svg>"))),g=this.sanitizeSVG(g),g=g.replace(/(url\(#highcharts-[0-9]+)&quot;/g,"$1").replace(/&quot;/g,"'")},getSVGForExport:function(a,b){var c=this.options.exporting;return this.getSVG(m({chart:{borderRadius:0}},c.chartOptions,b,{exporting:{sourceWidth:a&&a.sourceWidth||c.sourceWidth,sourceHeight:a&&a.sourceHeight||c.sourceHeight}}))},exportChart:function(b,c){var d=this.getSVGForExport(b,c);b=m(this.options.exporting,b),a.post(b.url,{filename:b.filename||"chart",type:b.type,width:b.width||0,scale:b.scale||2,svg:d},b.formAttributes)},print:function(){var a,b,c,f=this,g=f.container,h=[],j=g.parentNode,k=e.body,l=k.childNodes,m=f.options.exporting.printMaxWidth;f.isPrinting||(f.isPrinting=!0,f.pointer.reset(null,0),i(f,"beforePrint"),c=m&&f.chartWidth>m,c&&(a=f.hasUserSize,b=[f.chartWidth,f.chartHeight,!1],f.setSize(m,f.chartHeight,!1)),n(l,function(a,b){1===a.nodeType&&(h[b]=a.style.display,a.style.display=x)}),k.appendChild(g),d.focus(),d.print(),setTimeout(function(){j.appendChild(g),n(l,function(a,b){1===a.nodeType&&(a.style.display=h[b])}),f.isPrinting=!1,c&&(f.setSize.apply(f,b),f.hasUserSize=a),i(f,"afterPrint")},1e3))},contextMenu:function(a,b,c,d,f,i,k){var m,p,q,s,t=this,u=t.options.navigation,w=u.menuItemStyle,y=t.chartWidth,B=t.chartHeight,C="cache-"+a,D=t[C],E=r(f,i),F="3px 3px 10px #888",G=function(b){t.pointer.inClass(b.target,a)||p()};D||(t[C]=D=j(v,{className:a},{position:z,zIndex:1e3,padding:E+A},t.container),m=j(v,null,o({MozBoxShadow:F,WebkitBoxShadow:F,boxShadow:F},u.menuStyle),D),p=function(){l(D,{display:x}),k&&k.setState(0),t.openMenu=!1},g(D,"mouseleave",function(){q=setTimeout(p,500)}),g(D,"mouseenter",function(){clearTimeout(q)}),g(e,"mouseup",G),g(t,"destroy",function(){h(e,"mouseup",G)}),n(b,function(a){if(a){var b=a.separator?j("hr",null,null,m):j(v,{onmouseover:function(){l(this,u.menuItemHoverStyle)},onmouseout:function(){l(this,w)},onclick:function(b){b&&b.stopPropagation(),p(),a.onclick&&a.onclick.apply(t,arguments)},innerHTML:a.text||t.options.lang[a.textKey]},o({cursor:"pointer"},w),m);t.exportDivElements.push(b)}}),t.exportDivElements.push(m,D),t.exportMenuWidth=D.offsetWidth,t.exportMenuHeight=D.offsetHeight),s={display:"block"},c+t.exportMenuWidth>y?s.right=y-c-f-E+A:s.left=c-E+A,d+i+t.exportMenuHeight>B&&"top"!==k.alignOptions.verticalAlign?s.bottom=B-d-E+A:s.top=d+i-E+A,l(D,s),t.openMenu=!0},addButton:function(b){var d,e,f=this,g=f.renderer,h=m(f.options.navigation.buttonOptions,b),i=h.onclick,j=h.menuItems,k={stroke:h.symbolStroke,fill:h.symbolFill},l=h.symbolSize||12;if(f.btnCount||(f.btnCount=0),f.exportDivElements||(f.exportDivElements=[],f.exportSVGElements=[]),h.enabled!==!1){var n,p=h.theme,q=p.states,r=q&&q.hover,s=q&&q.select;delete p.states,i?n=function(a){a.stopPropagation(),i.call(f,a)}:j&&(n=function(){f.contextMenu(e.menuClassName,j,e.translateX,e.translateY,e.width,e.height,e),e.setState(2)}),h.text&&h.symbol?p.paddingLeft=a.pick(p.paddingLeft,25):h.text||o(p,{width:h.width,height:h.height,padding:0}),e=g.button(h.text,0,0,n,p,r,s).attr({title:f.options.lang[h._titleKey],"stroke-linecap":"round",zIndex:3}),e.menuClassName=b.menuClassName||y+"menu-"+f.btnCount++,h.symbol&&(d=g.symbol(h.symbol,h.symbolX-l/2,h.symbolY-l/2,l,l).attr(o(k,{"stroke-width":h.symbolStrokeWidth||1,zIndex:1})).add(e)),e.add().align(o(h,{width:e.width,x:a.pick(h.x,c)}),!0,"spacingBox"),c+=(e.width+h.buttonSpacing)*("right"===h.align?-1:1),f.exportSVGElements.push(e,d)}},destroyExport:function(a){var b,c,d=a.target;for(b=0;b<d.exportSVGElements.length;b++)c=d.exportSVGElements[b],c&&(c.onclick=c.ontouchstart=null,d.exportSVGElements[b]=c.destroy());for(b=0;b<d.exportDivElements.length;b++)c=d.exportDivElements[b],h(c,"mouseleave"),d.exportDivElements[b]=c.onmouseout=c.onmouseover=c.ontouchstart=c.onclick=null,k(c)}}),B.menu=function(a,b,c,d){var e=[t,a,b+2.5,u,a+c,b+2.5,t,a,b+d/2+.5,u,a+c,b+d/2+.5,t,a,b+d-1.5,u,a+c,b+d-1.5];return e},f.prototype.callbacks.push(function(a){var b,d=a.options.exporting,e=d.buttons;if(c=0,d.enabled!==!1){for(b in e)a.addButton(e[b]);g(a,"destroy",a.destroyExport)}})});
//# sourceMappingURL=exporting.src.min.js.map